<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.movieadmin.board.comments">
	<insert id="C_INSERT"
		parameterType="com.project.movieadmin.board.comments.CommentsVO">
		insert into
		comments(nickname, content, board_num)
		values(#{nickname},#{content},#{board_num})
	</insert>

	<update id="C_UPDATE">
		update comments set content=#{content}
		where
		comments_num=#{comments_num}
	</update>

	<delete id="C_DELETE">
		delete from comments where
		comments_num=#{comments_num}
	</delete>

	<select id="C_SELECT_ONE"
		resultType="com.project.movieadmin.board.comments.CommentsVO">
		select * from comments where comments_num=#{comments_num}
	</select>

	<select id="C_SELECT_ALL"
		resultType="com.project.movieadmin.board.comments.CommentsVO">
		select * from comments order by comments_num desc
	</select>

	<select id="C_INCREASEGOOD" resultType="int">
		update comments set good
		=
		good + 1
		where comments_num = #{comments_num}
	</select>

	<select id="C_INCREASEREPORT" resultType="int">
		update comments set
		report =
		report + 1
		where comments_num = #{comments_num}
	</select>

	<select id="C_SELECT_GOOD"
		resultType="com.project.movieadmin.board.comments.CommentsVO">
		select good from comments where
		comments_num=#{comments_num}
	</select>

	<select id="C_GOOD_CHECK" resultType="int">
		select count(*) as
		like_count from goodcheck where
		nickname = #{nickname} and
		board_num = #{board_num} and
		comments_num = #{comments_num}
	</select>

	<select id="C_GOOD_SAVE" resultType="int">
		insert into
		goodcheck(nickname, board_num, comments_num)
		values(#{nickname},#{board_num},#{comments_num})
	</select>
	
	<select id="C_SELECT_ALL_PAGE_BLOCK_NICKNAME"
		resultType="com.project.movieadmin.board.comments.CommentsVO">
		select * from comments where nickname=#{vo.nickname} order by
		comments_num desc
		limit ${startRow},
		${pageBlock}
	</select>


</mapper>